{% load static %}
{% load crispy_forms_tags %}
{% load user_profile_template_tags %}

<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- CSS -->
	<link rel="stylesheet" href="{% static 'user_profile/fontawesome/css/all.css' %}">
	<link rel="stylesheet" href="{% static 'user_profile/bootstrap/css/bootstrap.min.css' %}">
	
	<link rel="stylesheet" href="{% static 'user_profile/css/base.css' %}">
	<link rel="stylesheet" href="{% static 'user_profile/css/applications.css' %}">

	<style rel="stylesheet" type="text/css">{{ css|website }}</style>
	
	<title>{% block title %} {% endblock title %}</title>
</head>

<body>
	<noscript>
		<div class="alert alert-danger alert-dismissible fade show text-center" role="alert">
			<p>If you want the full experience, turn JavaScript back on baby.</p>
		</div>
	</noscript>


	{% if verify_password %}
		<noscript>
			<meta HTTP-EQUIV="REFRESH" content="0; url={% url 'profile:password_validation' %}">
		</noscript>
		<button id="show-form" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-backdrop="static" data-keyboard="false" hidden></button>

		<div class="center">
			<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			  <div class="modal-dialog mw-300" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title center-block">Verify Password</h5>
			      </div>
			      <div class="modal-body" style="text-align:center">
			        <form method="post" action="{% url 'profile:ajax_password_validation' %}" class="verify-password-form form-popup">
			          {% csrf_token %}
			             <p class="text-error" id="error"></p>
			          {{verify_password.password|as_crispy_field}}<br>
			          <button type="submit" class="btn btn-primary w-full">Verify Password</button>

			        </form>
			      </div>

			    </div>
			  </div>
			</div>
		</div>
	{% endif %}


	<!-- NavBar -->
	<div class="script-element">
		<nav class="navbar navbar-expand-lg navbar-dark bt-color1 mb-3 mb-md-5" style="">
			<a class="navbar-brand" href="{% url 'profile:home' %}">Website Name</a>

			<!-- JS Enabled -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse ml-3" id="navbarSupportedContent">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item dropdown {% block article %} {% endblock article %}">
						<a class="nav-link" href="{% url 'article:category_list' %}">article</a>
					</li>
					<li class="nav-item dropdown {% block store %} {% endblock store %}">
						<a class="nav-link" href="{% url 'store:item_category_list' %}">Store</a>
					</li>
					<li class="nav-item dropdown {% block order_summary %} {% endblock order_summary %}">
						<a class="nav-link" href="{% url 'store:order_summary' %}">Order Summary</a>
					</li>
					{% if user.is_superuser %}
						<li class="nav-item dropdown">
							<a class="nav-link" href="{% url 'admin:login' %}">Admin</a>
						</li>
					{% endif %}

					{% if user.is_authenticated %}
						<li class="nav-item dropdown {% block profile %} {% endblock profile %}">
							<a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								{{user}}
							</a>
							<div class="dropdown-menu animate slideIn" aria-labelledby="navbarDropdown">
								<a class="dropdown-item" href="{% url 'profile:profile' %}">Profile</a>
								<a class="dropdown-item" href="{% url 'store:billing_profile' %}">Billing</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="{% url 'profile:logout' %}">Logout</a>
							</div>
						</li>
					{% else %}
						<li class="nav-item dropdown {% block home %} {% endblock home %}">
							<a class="nav-link" href="{% url 'profile:login' %}">Login</a>
						</li>					
					{% endif %}
				</ul>
			</div>

		</nav>
	</div>

	<!-- JS Disabled -->
	<noscript class="">
		<nav class="navbar navbar-expand-lg navbar-dark bt-color1">
			<a class="navbar-brand" href="{% url 'profile:home' %}">Website Name</a>

			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<a class="nav-link" href="{% url 'article:category_list' %}">article</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'store:item_category_list' %}">Store</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'store:order_summary' %}">Order Summary</a>
				</li>
				{% if user.is_superuser %}
					<li class="nav-item">
						<a class="nav-link" href="{% url 'admin:login' %}">Admin</a>
					</li>
				{% endif %}

				{% if user.is_authenticated %}
					<li class="nav-item">
						<a class="nav-link" style="cursor:default">|</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" style="cursor:default">{{user}}:</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'profile:profile' %}">Profile</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'store:billing_profile' %}">Billing</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'profile:logout' %}">Logout</a>
					</li>
				{% else %}
					<li class="nav-item">
						<a class="nav-link" href="{% url 'profile:login' %}">Login</a>
					</li>
				{% endif %}
			</ul>

		</nav>
	</noscript>

	<!-- Messages -->
	<span id="random-error"></span>
	{% if messages %}
		{% for message in messages %}
		<div class="alert alert-{{message.tags}} alert-dismissible fade show text-center" role="alert">
			{{message|safe}}
			<button type="button" class="close script-element" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		{% endfor %}
	{% endif %}


	<!-- Block Body -->
	<a id="verifyUrl" href="{% url 'profile:ajax_password_validation' %}"></a>
	<div class="container-fluid">{% block body %} {% endblock body %}</div>

	<!-- Footer -->
	<footer class="container-fluid mt-5">
		<div class="row bt-color2 text-white">
			<div class="col-sm-6 col-lg-4 mt-3 mb-3 pl-4 pl-md-5">
				<h3>Contact Us</h3>
				<span>(626)-398-2102</span>
				<br>template-email@gmail.com
			</div>

			<div class="col-sm-6 col-lg-5 mt-sm-3 mb-3 pl-4 pl-md-5">
				<h3>My Social Profile</h3>
				<a href=""><i class="fab fa-facebook mr-2"></i></a>
				<a href=""><i class="fab fa-twitter mr-2" style="color: #0084b4"></i></a>
				<a href=""><i class="fab fa-instagram"></i></a>
			</div>
		</div>

		<div class="row bt-color1">
			<center class="col-12 pb-3 pt-3 text-14">Gaabeeg &#169;</center>
		</div>
	</footer>
	<!-- Script -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	<script src="{% static 'user_profile/bootstrap/js/bootstrap.min.js' %}"></script>
	<script src="{% static 'user_profile/waypoints/lib/jquery.waypoints.min.js' %}"></script>
	<script src="{% static 'user_profile/waypoints/lib/shortcuts/infinite.min.js' %}"></script>


	<script type="text/javascript" src="{% static 'user_profile/js/reusable_code/token.js' %}"></script>
	<script type="text/javascript" src="{% static 'user_profile/js/reusable_code/data.js' %}"></script>
	<script type="text/javascript" src="{% static 'user_profile/js/reusable_code/functions.js' %}"></script>
	<script type="text/javascript">
		$(".script-element").show()
		verifyUrl = $("#verifyUrl").attr('href')
		
		if ($("#form-popup")){
			$("#show-form").click();
		}
	</script>
	{% block javascript %} {% endblock javascript %}
</body>
</html>